[{"path":"https://s3alfisc.github.io/summclust/CONTRIBUTING.html","id":null,"dir":"","previous_headings":"","what":"Contributing to summclust","title":"Contributing to summclust","text":"outlines propose change summclust.","code":""},{"path":"https://s3alfisc.github.io/summclust/CONTRIBUTING.html","id":"fixing-typos","dir":"","previous_headings":"","what":"Fixing typos","title":"Contributing to summclust","text":"can fix typos, spelling mistakes, grammatical errors documentation directly using GitHub web interface, long changes made source file. generally means ’ll need edit roxygen2 comments .R, .Rd file. can find .R file generates .Rd reading comment first line.","code":""},{"path":"https://s3alfisc.github.io/summclust/CONTRIBUTING.html","id":"bigger-changes","dir":"","previous_headings":"","what":"Bigger changes","title":"Contributing to summclust","text":"want make bigger change, ’s good idea first file issue make sure someone team agrees ’s needed. ’ve found bug, please file issue illustrates bug minimal reprex (also help write unit test, needed).","code":""},{"path":"https://s3alfisc.github.io/summclust/CONTRIBUTING.html","id":"pull-request-process","dir":"","previous_headings":"Bigger changes","what":"Pull request process","title":"Contributing to summclust","text":"Fork package clone onto computer. haven’t done , recommend using usethis::create_from_github(\"s3alfisc/summclust\", fork = TRUE). Install development dependencies devtools::install_dev_deps(), make sure package passes R CMD check running devtools::check(). R CMD check doesn’t pass cleanly, ’s good idea ask help continuing. Create Git branch pull request (PR). recommend using usethis::pr_init(\"brief-description--change\"). Make changes, commit git, create PR running usethis::pr_push(), following prompts browser. title PR briefly describe change. body PR contain Fixes #issue-number. user-facing changes, add bullet top NEWS.md (.e. just first header). Follow style described https://style.tidyverse.org/news.html.","code":""},{"path":"https://s3alfisc.github.io/summclust/CONTRIBUTING.html","id":"code-style","dir":"","previous_headings":"Bigger changes","what":"Code style","title":"Contributing to summclust","text":"New code follow tidyverse style guide. can use styler package apply styles, please don’t restyle code nothing PR. use roxygen2, Markdown syntax, documentation. use testthat unit tests. Contributions test cases included easier accept.","code":""},{"path":"https://s3alfisc.github.io/summclust/LICENSE.html","id":null,"dir":"","previous_headings":"","what":"MIT License","title":"MIT License","text":"Copyright (c) 2022 summclust authors Permission hereby granted, free charge, person obtaining copy software associated documentation files (“Software”), deal Software without restriction, including without limitation rights use, copy, modify, merge, publish, distribute, sublicense, /sell copies Software, permit persons Software furnished , subject following conditions: copyright notice permission notice shall included copies substantial portions Software. SOFTWARE PROVIDED “”, WITHOUT WARRANTY KIND, EXPRESS IMPLIED, INCLUDING LIMITED WARRANTIES MERCHANTABILITY, FITNESS PARTICULAR PURPOSE NONINFRINGEMENT. EVENT SHALL AUTHORS COPYRIGHT HOLDERS LIABLE CLAIM, DAMAGES LIABILITY, WHETHER ACTION CONTRACT, TORT OTHERWISE, ARISING , CONNECTION SOFTWARE USE DEALINGS SOFTWARE.","code":""},{"path":"https://s3alfisc.github.io/summclust/articles/Cluster-Robust-Variance-Estimators-CRV-1-3.html","id":"introduction","dir":"Articles","previous_headings":"","what":"Introduction","title":"Cluster-Robust Variance Estimators: CRV 1-3","text":"summclust handles cluster robust variance estimation linear regression models form \\[\\begin{align} y &= X \\beta + u \\\\   &=  \\begin{bmatrix} y_{1} \\\\ y_{2} \\\\ ...\\\\ y_{G} \\end{bmatrix} = \\begin{bmatrix} X_{1} \\\\ X_{2} \\\\ ...\\\\ X_{G} \\end{bmatrix} \\beta +  \\begin{bmatrix} u_{1} \\\\ u_{2} \\\\ ...\\\\ u_{G} \\end{bmatrix}, \\end{align}\\] \\(E(u|X) = 0\\), group \\(g\\) contains \\(N_{g}\\) observations \\(N = \\sum_{g = 1}^{G} N_{g}\\). regression residuals \\(u\\) allowed correlated within clusters, assumed uncorrelated across clusters. consequence, models’ covariance matrix block diagonal. cluster, denote \\(E(u_{g} u_{g}') =\\Sigma_{g}\\). denote predicted residual \\(\\hat{u} = y - X \\beta\\).","code":""},{"path":"https://s3alfisc.github.io/summclust/articles/Cluster-Robust-Variance-Estimators-CRV-1-3.html","id":"three-cluster-robust-variance-estimators","dir":"Articles","previous_headings":"","what":"Three Cluster-Robust Variance Estimators","title":"Cluster-Robust Variance Estimators: CRV 1-3","text":"literature cluster robust inference proposed three different estimators, follow ‘sandwich’ structure \\[\\begin{align}   \\hat{V}(\\hat{\\beta}) &= m (X'X)^{-1} (\\sum_{g=1}^{G} \\hat{\\Sigma}_{g} ) (X'X)^{-1} \\\\    &=  m (X'X)^{-1} (\\sum_{g=1}^{G} \\hat{s}_{g} \\hat{s}_{g}')  (X'X)^{-1} \\end{align}\\] three proposed types CRV estimators vary \\(\\hat{s}_{g}\\) estimated small sample corrections \\(m\\) applied. common cluster robust estimator, CRV1 estimator, defined \\[\\begin{align} \\hat{s}_{g} =  X_{g}'\\hat{u}_{g} && \\& && m = \\frac{N-1}{N-k} / \\frac{G}{G-1}  \\end{align}\\] cluster contains unique observation, .e. \\(G=N\\), CRV1 estimator equivalent HC1 heteroskedasticity robust estimator. CRV2 estimator computed \\[\\begin{align} \\hat{s}_{g} =  X_{g}' M_{gg}^{-1/2} \\hat{u}_{g} && \\& && m = 1. \\end{align}\\] define \\(M_{gg}\\), first define “hat” matrix \\[\\begin{equation}   H_g = X_g (X'X)^{-1} X_g'  \\end{equation}\\] \\(I_{N_g}\\) diagonal matrix observations cluster \\(g\\). \\(M_{gg}\\) defined \\[\\begin{equation}   M_{gg} = I_{N_g} - H_g. \\end{equation}\\] Last, CRV3 estimator defined \\[\\begin{align} \\hat{s}_{g} =  X_{g}' M_{gg}^{-1} \\hat{u}_{g} && \\& && m = G/(G-1). \\end{align}\\]","code":""},{"path":"https://s3alfisc.github.io/summclust/articles/Cluster-Robust-Variance-Estimators-CRV-1-3.html","id":"jackknife-formulation-of-the-crv3-estimator-crv3j","dir":"Articles","previous_headings":"","what":"Jackknife formulation of the CRV3 estimator (CRV3J)","title":"Cluster-Robust Variance Estimators: CRV 1-3","text":"Building work Niccodemi Wansbeek, MacKinnon, Nielsen Webb show CRV3 estimator can computed Jackknife estimator. First, let’s define \\(\\hat{\\beta}^{(g)}\\), OLS estimate (1) cluster g omitted: \\[\\begin{equation} \\hat{\\beta}^{(g)} = ((X'X)^{-1} - (X_{g}'X_{g})^{-1})(X'y - X_{g}'y_{g}), g = 1, ... , G. \\end{equation}\\] MNW show CRV3 estimator equivalent computing \\[\\begin{equation} \\hat{V}_{3}(\\hat{\\beta}) = \\frac{G}{G-1} \\sum{g = 1}^{G} (\\hat{\\beta}^{(g)} - \\hat{\\beta}) (\\hat{\\beta}^{(g)} - \\hat{\\beta})' \\end{equation}\\] propose following Jackknive estimator, CRVJ: \\[\\begin{equation} \\hat{V}_{3J}(\\hat{\\beta}) = \\frac{G}{G-1} \\sum{g = 1}^{G} (\\hat{\\beta}^{(g)} - \\bar{\\beta}) (\\hat{\\beta}^{(g)} - \\bar{\\beta})' \\end{equation}\\] \\(\\bar{\\beta} = G^{-1} \\sum_{g=1}^{G} \\hat{\\beta}^{(g)}\\). \\(G=N\\), Jackknife estimator equivalent HC3 heteroskedasticity-robust estimator proposed MacKinnon White.","code":""},{"path":"https://s3alfisc.github.io/summclust/articles/summclust.html","id":"introduction","dir":"Articles","previous_headings":"","what":"Introduction","title":"Using summclust","text":"summclust package allows compute leverage statistics clustered errors fast CRV3(J) variance-covariance matrices described MacKinnon, J.G., Nielsen, M.Ø., Webb, M.D., 2022. Leverage, influence, jackknife clustered regression models: Reliable inference using summclust. post-estimation command currently supports methods objects type lm (stats) fixest (fixest package).","code":""},{"path":"https://s3alfisc.github.io/summclust/articles/summclust.html","id":"the-summclust-function","dir":"Articles","previous_headings":"","what":"The summclust function","title":"Using summclust","text":"visually inspect leverage statistics, use plot method","code":"library(summclust) library(lmtest) library(haven)  nlswork <- read_dta(\"http://www.stata-press.com/data/r9/nlswork.dta\") # drop NAs at the moment nlswork <- nlswork[, c(\"ln_wage\", \"grade\", \"age\", \"birth_yr\", \"union\", \"race\", \"msp\", \"ind_code\")] nlswork <- na.omit(nlswork)  lm_fit <- lm(   ln_wage ~ as.factor(grade) + as.factor(age) + as.factor(birth_yr) + union +  race + msp,   data = nlswork)  summclust_res <- summclust(   obj = lm_fit,   cluster = ~ind_code,   params = c(\"msp\", \"union\") )  # CRV3-based inference - exactly matches output of summclust-stata tidy(summclust_res) #>             coef     tstat         se      p_val  conf_int_l  conf_int_u #> union  0.2039597  2.440122 0.08358587 0.03281561  0.01998847 0.387930980 #> msp   -0.0275151 -1.956404 0.01406412 0.07628064 -0.05847002 0.003439815  summary(summclust_res) #> summclust.lm(obj = lm_fit, cluster = ~ind_code, params = c(\"msp\",  #>     \"union\")) #>   #> Number of observations: 19130  #> Number of clusters: 7  #>   #>             coef     tstat         se      p_val  conf_int_l  conf_int_u #> union  0.2039597  2.440122 0.08358587 0.03281561  0.01998847 0.387930980 #> msp   -0.0275151 -1.956404 0.01406412 0.07628064 -0.05847002 0.003439815 #>   #>                 N_G    leverage partial-leverage-msp partial-leverage-union #> Min.      38.000000  0.09332052         0.0006662968            0.001622359 #> 1st Qu.  172.000000  0.70440923         0.0048899422            0.009133996 #> Median   995.500000  3.51549151         0.0379535242            0.056682344 #> Mean    1594.166667  5.41666667         0.0833333333            0.083333333 #> 3rd Qu. 2047.250000  6.41132962         0.1004277711            0.106083114 #> Max.    6335.000000 20.28918187         0.3597669210            0.312994532 #> coefvar    1.187237  1.15296458         1.3313784379            1.141326117 #>            beta-msp beta-union #> Min.    -0.03320040  0.1624754 #> 1st Qu. -0.02893131  0.1994694 #> Median  -0.02776470  0.2045197 #> Mean    -0.02691999  0.2053997 #> 3rd Qu. -0.02610221  0.2056569 #> Max.    -0.01583453  0.2754228 #> coefvar  0.16289813  0.1279443 plot(summclust_res) #> $residual_leverage #>  #> $coef_leverage #>  #> $coef_beta"},{"path":"https://s3alfisc.github.io/summclust/articles/summclust.html","id":"using-summclust-with-coefplot-and-fixest","dir":"Articles","previous_headings":"","what":"Using summclust with coefplot and fixest","title":"Using summclust","text":"Note can also use CVR3 CRV3J covariance matrices computed via summclust vcov_CR3J method lmtest() fixest packages. p-value confidence intervals fixest::coeftable() differ lmtest::coeftest() summclust::coeftable(). due fact fixest::coeftable() uses different degree freedom t-distribution used calculation (believe uses t(N-1)).","code":"library(lmtest)  vcov3J <-    vcov_CR3J(     lm_fit,      cluster = ~ ind_code   )  all.equal(   vcov3J,    summclust_res$vcov ) #> [1] \"Attributes: < Names: 2 string mismatches >\"                           #> [2] \"Attributes: < Length mismatch: comparison on first 2 components >\"    #> [3] \"Attributes: < Component 1: Modes: character, numeric >\"               #> [4] \"Attributes: < Component 1: Lengths: 1, 2 >\"                           #> [5] \"Attributes: < Component 1: target is character, current is numeric >\" #> [6] \"Attributes: < Component 2: Modes: numeric, list >\"                    #> [7] \"Attributes: < Component 2: target is numeric, current is list >\"      #> [8] \"target is vcov_CR3J, current is matrix\"  df <- length(summclust_res$cluster) - 1  # with lmtest CRV1 <- lmtest::coeftest(lm_fit, sandwich::vcovCL(lm_fit, ~ind_code), df = df) CRV3 <- lmtest::coeftest(lm_fit, vcov3J, df = df)  CRV1[c(\"union\", \"race\", \"msp\"),] #>          Estimate  Std. Error   t value     Pr(>|t|) #> union  0.20395972 0.061167499  3.334446 0.0066585766 #> race  -0.08619813 0.016150418 -5.337207 0.0002384275 #> msp   -0.02751510 0.009293046 -2.960827 0.0129561148 CRV3[c(\"union\", \"race\", \"msp\"),] #>          Estimate Std. Error   t value    Pr(>|t|) #> union  0.20395972 0.08358587  2.440122 0.032815614 #> race  -0.08619813 0.01904684 -4.525586 0.000864074 #> msp   -0.02751510 0.01406412 -1.956404 0.076280639  stats::confint(CRV1)[c(\"union\", \"race\", \"msp\"),] #>             2.5 %       97.5 % #> union  0.06933097  0.338588481 #> race  -0.12174496 -0.050651302 #> msp   -0.04796896 -0.007061245 stats::confint(CRV3)[c(\"union\", \"race\", \"msp\"),] #>             2.5 %       97.5 % #> union  0.01998847  0.387930980 #> race  -0.12811995 -0.044276312 #> msp   -0.05847002  0.003439815 library(fixest)  feols_fit <- feols(   ln_wage ~ i(grade) + i(age) + i(birth_yr) + union +  race + msp,   data = nlswork )  # Store vcov into the fixest object feols_fit <- summary(   feols_fit,    vcov = vcov_CR3J(feols_fit, cluster = ~ ind_code) )  # Now it just works with fixest functions fixest::coeftable(feols_fit, keep = c(\"msp\", \"union\", \"race\")) #>          Estimate Std. Error   t value     Pr(>|t|) #> union  0.20395972 0.08358587  2.440122 1.469134e-02 #> race  -0.08619813 0.01904684 -4.525586 6.059226e-06 #> msp   -0.02751510 0.01406412 -1.956404 5.043213e-02"},{"path":"https://s3alfisc.github.io/summclust/authors.html","id":null,"dir":"","previous_headings":"","what":"Authors","title":"Authors and Citation","text":"Alexander Fischer. Author, maintainer.","code":""},{"path":"https://s3alfisc.github.io/summclust/authors.html","id":"citation","dir":"","previous_headings":"","what":"Citation","title":"Authors and Citation","text":"Fischer (2023). summclust: Module Compute Influence Leverage Statistics Regression Models Clustered Errors. R package version 0.7.0, https://s3alfisc.github.io/summclust/.","code":"@Manual{,   title = {summclust: Module to Compute Influence and Leverage Statistics for Regression Models with Clustered Errors},   author = {Alexander Fischer},   year = {2023},   note = {R package version 0.7.0},   url = {https://s3alfisc.github.io/summclust/}, }"},{"path":"https://s3alfisc.github.io/summclust/index.html","id":"summclust","dir":"","previous_headings":"","what":"Module to Compute Influence and Leverage Statistics for Regression Models with Clustered Errors","title":"Module to Compute Influence and Leverage Statistics for Regression Models with Clustered Errors","text":"summclust R module cluster level measures leverage influence, implements CRV3 CRV3J cluster robust variance estimators. introduction package, take look vignette. quick overview different CRV estimators, take look cluster robust variance estimation vignette. detailed description implemented methods, particular discussion different leverage influence metrics, see: MacKinnon, J.G., Nielsen, M.Ø., Webb, M.D., 2022. Leverage, influence, jackknife clustered regression models: Reliable inference using summclust. QED Working Paper 1483. Queen’s University. Stata version package, see .","code":""},{"path":"https://s3alfisc.github.io/summclust/index.html","id":"installation","dir":"","previous_headings":"","what":"Installation","title":"Module to Compute Influence and Leverage Statistics for Regression Models with Clustered Errors","text":"can install development version summclust CRAN, GitHub r-universe :","code":"# install from CRAN install.packages('summclust')  # from r-universe (windows & mac, compiled R > 4.0 required) install.packages('summclust', repos ='https://s3alfisc.r-universe.dev')  # install.packages(\"devtools\") devtools::install_github(\"s3alfisc/summclust\")"},{"path":"https://s3alfisc.github.io/summclust/reference/plot.summclust.html","id":null,"dir":"Reference","previous_headings":"","what":"Plotting method for objects of type summclust — plot.summclust","title":"Plotting method for objects of type summclust — plot.summclust","text":"Plots residual leverage, partial leverage leave-one-cluster-regression coefficients","code":""},{"path":"https://s3alfisc.github.io/summclust/reference/plot.summclust.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Plotting method for objects of type summclust — plot.summclust","text":"","code":"# S3 method for summclust plot(x, ...)"},{"path":"https://s3alfisc.github.io/summclust/reference/plot.summclust.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Plotting method for objects of type summclust — plot.summclust","text":"x object type summclust ... optional function arguments","code":""},{"path":"https://s3alfisc.github.io/summclust/reference/plot.summclust.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"Plotting method for objects of type summclust — plot.summclust","text":"list containing residual_leverage ggplot residual leverages coef_leverage ggplot coefficient leverages coef_beta ggplot leave-one-cluster jackknife regression coefficients","code":""},{"path":"https://s3alfisc.github.io/summclust/reference/plot.summclust.html","id":"details","dir":"Reference","previous_headings":"","what":"Details","title":"Plotting method for objects of type summclust — plot.summclust","text":"Note function requires ggplot2 installed.","code":""},{"path":"https://s3alfisc.github.io/summclust/reference/plot.summclust.html","id":"references","dir":"Reference","previous_headings":"","what":"References","title":"Plotting method for objects of type summclust — plot.summclust","text":"MacKinnon, James G., Morten Ørregaard Nielsen, Matthew D. Webb. \"Leverage, influence, jackknife clustered regression models: Reliable inference using summclust.\" arXiv preprint arXiv:2205.03288 (2022).","code":""},{"path":"https://s3alfisc.github.io/summclust/reference/plot.summclust.html","id":"ref-examples","dir":"Reference","previous_headings":"","what":"Examples","title":"Plotting method for objects of type summclust — plot.summclust","text":"","code":"# \\donttest{ if(requireNamespace(\"summclust\") && requireNamespace(\"haven\")){  library(summclust) library(haven)  nlswork <- read_dta(\"http://www.stata-press.com/data/r9/nlswork.dta\") # drop NAs at the moment nlswork <- nlswork[, c(\"ln_wage\", \"grade\", \"age\", \"birth_yr\", \"union\", \"race\", \"msp\", \"ind_code\")] nlswork <- na.omit(nlswork)  lm_fit <- lm(   ln_wage ~ union +  race + msp + as.factor(birth_yr) + as.factor(age) + as.factor(grade),   data = nlswork)  res <- summclust(    obj = lm_fit,    params = c(\"msp\", \"union\"),    cluster = ~ind_code,  )   plot(res) } #> Loading required namespace: haven #> Error in eval(mf, parent.frame()): object 'nlswork' not found # }"},{"path":"https://s3alfisc.github.io/summclust/reference/reexports.html","id":null,"dir":"Reference","previous_headings":"","what":"Objects exported from other packages — reexports","title":"Objects exported from other packages — reexports","text":"objects imported packages. Follow links see documentation. generics tidy","code":""},{"path":"https://s3alfisc.github.io/summclust/reference/summary.summclust.html","id":null,"dir":"Reference","previous_headings":"","what":"A summary() method for objects of type summclust — summary.summclust","title":"A summary() method for objects of type summclust — summary.summclust","text":"summary() method objects type summclust","code":""},{"path":"https://s3alfisc.github.io/summclust/reference/summary.summclust.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"A summary() method for objects of type summclust — summary.summclust","text":"","code":"# S3 method for summclust summary(object, ...)"},{"path":"https://s3alfisc.github.io/summclust/reference/summary.summclust.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"A summary() method for objects of type summclust — summary.summclust","text":"object object type summclust ... misc arguments","code":""},{"path":"https://s3alfisc.github.io/summclust/reference/summary.summclust.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"A summary() method for objects of type summclust — summary.summclust","text":"function summary.summclust returns range cluster leverage statistics based object type summclust","code":""},{"path":"https://s3alfisc.github.io/summclust/reference/summary.summclust.html","id":"references","dir":"Reference","previous_headings":"","what":"References","title":"A summary() method for objects of type summclust — summary.summclust","text":"MacKinnon, James G., Morten Ørregaard Nielsen, Matthew D. Webb. \"Leverage, influence, jackknife clustered regression models: Reliable inference using summclust.\" arXiv preprint arXiv:2205.03288 (2022).","code":""},{"path":"https://s3alfisc.github.io/summclust/reference/summary.summclust.html","id":"ref-examples","dir":"Reference","previous_headings":"","what":"Examples","title":"A summary() method for objects of type summclust — summary.summclust","text":"","code":"# \\donttest{ if(requireNamespace(\"summclust\") && requireNamespace(\"haven\")){ library(summclust) library(haven)  nlswork <- read_dta(\"http://www.stata-press.com/data/r9/nlswork.dta\") # drop NAs at the moment nlswork <- nlswork[, c(\"ln_wage\", \"grade\", \"age\", \"birth_yr\", \"union\", \"race\", \"msp\", \"ind_code\")] nlswork <- na.omit(nlswork)  lm_fit <- lm(   ln_wage ~ union +  race + msp + as.factor(birth_yr) + as.factor(age) + as.factor(grade),   data = nlswork)  res <- summclust(    obj = lm_fit,    params = c(\"msp\", \"union\"),    cluster = ~ind_code,  )   summary(res) } #> Error in eval(mf, parent.frame()): object 'nlswork' not found # }"},{"path":"https://s3alfisc.github.io/summclust/reference/summclust.fixest.html","id":null,"dir":"Reference","previous_headings":"","what":"Compute Influence and Leverage Metrics for objects of type fixest — summclust.fixest","title":"Compute Influence and Leverage Metrics for objects of type fixest — summclust.fixest","text":"Compute influence leverage metrics clustered inference based Cluster Jackknife described MacKinnon, Nielsen & Webb (2022) objects type fixest.","code":""},{"path":"https://s3alfisc.github.io/summclust/reference/summclust.fixest.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Compute Influence and Leverage Metrics for objects of type fixest — summclust.fixest","text":"","code":"# S3 method for fixest summclust(   obj,   cluster,   params,   absorb_cluster_fixef = TRUE,   type = \"CRV3\",   ... )"},{"path":"https://s3alfisc.github.io/summclust/reference/summclust.fixest.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Compute Influence and Leverage Metrics for objects of type fixest — summclust.fixest","text":"obj object type fixest cluster clustering vector params character vector variables leverage statistics computed. NULL, leverage statistics computed k model covariates absorb_cluster_fixef TRUE default. cluster fixed effects projected ? increases numerical stability decreases computational costs type \"CRV3\" \"CRV3J\" following MacKinnon, Nielsen & Webb ... function arguments passed 'vcov'","code":""},{"path":"https://s3alfisc.github.io/summclust/reference/summclust.fixest.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"Compute Influence and Leverage Metrics for objects of type fixest — summclust.fixest","text":"object type summclust, including CRV3 variance-covariance estimate described MacKinnon, Nielsen & Webb (2022) coef_estimates coefficient estimates linear model. vcov CRV3 CRV3J variance-covariance matrix estimate described MacKinnon, Nielsen & Webb (2022) leverage_g vector leverages. leverage_avg cluster leverage. partial_leverage partial leverages. coef_var_leverage_avg Coefficient Variation leverage statistic coef_var_leverage_g Coefficient Variation Partial Leverage Statistics coef_var_N_G Coefficient Variation Cluster Sizes. beta_jack jackknifed' leave--cluster-regression coefficients. params input parameter vector 'params'. N_G number clusters- call summclust() function call. cluster names clusters.","code":""},{"path":"https://s3alfisc.github.io/summclust/reference/summclust.fixest.html","id":"references","dir":"Reference","previous_headings":"","what":"References","title":"Compute Influence and Leverage Metrics for objects of type fixest — summclust.fixest","text":"MacKinnon, James G., Morten Ørregaard Nielsen, Matthew D. Webb. \"Leverage, influence, jackknife clustered regression models: Reliable inference using summclust.\" arXiv preprint arXiv:2205.03288 (2022).","code":""},{"path":"https://s3alfisc.github.io/summclust/reference/summclust.fixest.html","id":"ref-examples","dir":"Reference","previous_headings":"","what":"Examples","title":"Compute Influence and Leverage Metrics for objects of type fixest — summclust.fixest","text":"","code":"# \\donttest{ if(requireNamespace(\"summclust\")  && requireNamespace(\"haven\")  && requireNamespace(\"fixest\")){  library(summclust) library(haven) library(fixest)  nlswork <- read_dta(\"http://www.stata-press.com/data/r9/nlswork.dta\") # drop NAs at the moment nlswork <- nlswork[, c(\"ln_wage\", \"grade\", \"age\", \"birth_yr\", \"union\", \"race\", \"msp\", \"ind_code\")] nlswork <- na.omit(nlswork)  feols_fit <- lm(   ln_wage ~ union +  race + msp + as.factor(birth_yr) + as.factor(age) + as.factor(grade),   data = nlswork)  res <- summclust(    obj = feols_fit,    params = c(\"msp\", \"union\"),    cluster = ~ind_code,  )   summary(res)  tidy(res)  plot(res) } #> Loading required namespace: fixest #> Error in eval(mf, parent.frame()): object 'nlswork' not found # }"},{"path":"https://s3alfisc.github.io/summclust/reference/summclust.html","id":null,"dir":"Reference","previous_headings":"","what":"Compute Influence and Leverage Metrics — summclust","title":"Compute Influence and Leverage Metrics — summclust","text":"Compute influence leverage metrics clustered inference based Cluster Jackknife described MacKinnon, Nielsen & Webb (2022).","code":""},{"path":"https://s3alfisc.github.io/summclust/reference/summclust.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Compute Influence and Leverage Metrics — summclust","text":"","code":"summclust(obj, ...)"},{"path":"https://s3alfisc.github.io/summclust/reference/summclust.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Compute Influence and Leverage Metrics — summclust","text":"obj object class lm fixest ... arguments","code":""},{"path":"https://s3alfisc.github.io/summclust/reference/summclust.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"Compute Influence and Leverage Metrics — summclust","text":"object type summclust, including CRV3 variance-covariance estimate described MacKinnon, Nielsen & Webb (2022)","code":""},{"path":"https://s3alfisc.github.io/summclust/reference/summclust.html","id":"references","dir":"Reference","previous_headings":"","what":"References","title":"Compute Influence and Leverage Metrics — summclust","text":"MacKinnon, James G., Morten Ørregaard Nielsen, Matthew D. Webb. \"Leverage, influence, jackknife clustered regression models: Reliable inference using summclust.\" arXiv preprint arXiv:2205.03288 (2022).","code":""},{"path":[]},{"path":"https://s3alfisc.github.io/summclust/reference/summclust.html","id":"ref-examples","dir":"Reference","previous_headings":"","what":"Examples","title":"Compute Influence and Leverage Metrics — summclust","text":"","code":"# \\donttest{ if(requireNamespace(\"summclust\") && requireNamespace(\"haven\")){  library(summclust) library(haven)  nlswork <- read_dta(\"http://www.stata-press.com/data/r9/nlswork.dta\") # drop NAs at the moment nlswork <- nlswork[, c(\"ln_wage\", \"grade\", \"age\", \"birth_yr\", \"union\", \"race\", \"msp\", \"ind_code\")] nlswork <- na.omit(nlswork)  lm_fit <- lm(   ln_wage ~ union +  race + msp + as.factor(birth_yr) + as.factor(age) + as.factor(grade),   data = nlswork)  res <- summclust(    obj = lm_fit,    params = c(\"msp\", \"union\"),    cluster = ~ind_code,  )   summary(res)  tidy(res)  plot(res) } #> Error in eval(mf, parent.frame()): object 'nlswork' not found # }"},{"path":"https://s3alfisc.github.io/summclust/reference/summclust.lm.html","id":null,"dir":"Reference","previous_headings":"","what":"Compute Influence and Leverage Metrics for objects of type lm — summclust.lm","title":"Compute Influence and Leverage Metrics for objects of type lm — summclust.lm","text":"Compute influence leverage metrics clustered inference based Cluster Jackknife described MacKinnon, Nielsen & Webb (2022) objects type lm.","code":""},{"path":"https://s3alfisc.github.io/summclust/reference/summclust.lm.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Compute Influence and Leverage Metrics for objects of type lm — summclust.lm","text":"","code":"# S3 method for lm summclust(obj, cluster, params, type = \"CRV3\", ...)"},{"path":"https://s3alfisc.github.io/summclust/reference/summclust.lm.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Compute Influence and Leverage Metrics for objects of type lm — summclust.lm","text":"obj object type lm cluster clustering vector params character vector variables leverage statistics computed. type \"CRV3\" \"CRV3J\" following MacKinnon, Nielsen & Webb. CRV3 default ... function arguments passed 'vcov'","code":""},{"path":"https://s3alfisc.github.io/summclust/reference/summclust.lm.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"Compute Influence and Leverage Metrics for objects of type lm — summclust.lm","text":"object type summclust, including CRV3 variance-covariance estimate described MacKinnon, Nielsen & Webb (2022) coef_estimates coefficient estimates linear model. vcov CRV3 CRV3J variance-covariance matrix estimate described MacKinnon, Nielsen & Webb (2022) leverage_g vector leverages. leverage_avg cluster leverage. partial_leverage partial leverages. beta_jack jackknifed' leave--cluster-regression coefficients. params input parameter vector 'params'. N_G number clusters- call summclust() function call. cluster names clusters.","code":""},{"path":"https://s3alfisc.github.io/summclust/reference/summclust.lm.html","id":"references","dir":"Reference","previous_headings":"","what":"References","title":"Compute Influence and Leverage Metrics for objects of type lm — summclust.lm","text":"MacKinnon, James G., Morten Ørregaard Nielsen, Matthew D. Webb. \"Leverage, influence, jackknife clustered regression models: Reliable inference using summclust.\" arXiv preprint arXiv:2205.03288 (2022).","code":""},{"path":"https://s3alfisc.github.io/summclust/reference/summclust.lm.html","id":"ref-examples","dir":"Reference","previous_headings":"","what":"Examples","title":"Compute Influence and Leverage Metrics for objects of type lm — summclust.lm","text":"","code":"# \\donttest{ if(requireNamespace(\"summclust\") && requireNamespace(\"haven\")){  library(summclust) library(haven)  nlswork <- read_dta(\"http://www.stata-press.com/data/r9/nlswork.dta\") # drop NAs at the moment nlswork <- nlswork[, c(\"ln_wage\", \"grade\", \"age\", \"birth_yr\", \"union\", \"race\", \"msp\", \"ind_code\")] nlswork <- na.omit(nlswork)  lm_fit <- lm(   ln_wage ~ union +  race + msp + as.factor(birth_yr) + as.factor(age) + as.factor(grade),   data = nlswork)  res <- summclust(    obj = lm_fit,    cluster = ~ind_code,    params = c(\"msp\", \"union\")  )   summary(res)  tidy(res)  plot(res) } #> Error in eval(mf, parent.frame()): object 'nlswork' not found # }"},{"path":"https://s3alfisc.github.io/summclust/reference/tidy.summclust.html","id":null,"dir":"Reference","previous_headings":"","what":"S3 method to summarize objects of class boottest into tidy data.frame — tidy.summclust","title":"S3 method to summarize objects of class boottest into tidy data.frame — tidy.summclust","text":"Obtain results summclust object tidy data frame.","code":""},{"path":"https://s3alfisc.github.io/summclust/reference/tidy.summclust.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"S3 method to summarize objects of class boottest into tidy data.frame — tidy.summclust","text":"","code":"# S3 method for summclust tidy(x, ...)"},{"path":"https://s3alfisc.github.io/summclust/reference/tidy.summclust.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"S3 method to summarize objects of class boottest into tidy data.frame — tidy.summclust","text":"x object class 'summclust' ... arguments","code":""},{"path":"https://s3alfisc.github.io/summclust/reference/tidy.summclust.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"S3 method to summarize objects of class boottest into tidy data.frame — tidy.summclust","text":"data.frame containing coefficient estimates, t-statistics, standard errors, p-value, confidence intervals based CRV3 variance-covariance matrix t(G-1) distribution","code":""},{"path":"https://s3alfisc.github.io/summclust/reference/tidy.summclust.html","id":"references","dir":"Reference","previous_headings":"","what":"References","title":"S3 method to summarize objects of class boottest into tidy data.frame — tidy.summclust","text":"MacKinnon, James G., Morten Ørregaard Nielsen, Matthew D. Webb. \"Leverage, influence, jackknife clustered regression models: Reliable inference using summclust.\" arXiv preprint arXiv:2205.03288 (2022).","code":""},{"path":"https://s3alfisc.github.io/summclust/reference/tidy.summclust.html","id":"ref-examples","dir":"Reference","previous_headings":"","what":"Examples","title":"S3 method to summarize objects of class boottest into tidy data.frame — tidy.summclust","text":"","code":"# \\donttest{ if(requireNamespace(\"summclust\") && requireNamespace(\"haven\")){  library(summclust) library(haven)  nlswork <- read_dta(\"http://www.stata-press.com/data/r9/nlswork.dta\") # drop NAs at the moment nlswork <- nlswork[, c(\"ln_wage\", \"grade\", \"age\", \"birth_yr\", \"union\", \"race\", \"msp\", \"ind_code\")] nlswork <- na.omit(nlswork)  lm_fit <- lm(   ln_wage ~ union +  race + msp + as.factor(birth_yr) + as.factor(age) + as.factor(grade),   data = nlswork)  res <- summclust(    obj = lm_fit,    params = c(\"msp\", \"union\"),    cluster = ~ind_code,  )   tidy(res) } #> Error in eval(mf, parent.frame()): object 'nlswork' not found # }"},{"path":"https://s3alfisc.github.io/summclust/reference/vcov_CR3J.fixest.html","id":null,"dir":"Reference","previous_headings":"","what":"Compute CRV3 covariance matrices via a cluster\njackknife as described in MacKinnon, Nielsen & Webb\n(2022) for objects of type fixest — vcov_CR3J.fixest","title":"Compute CRV3 covariance matrices via a cluster\njackknife as described in MacKinnon, Nielsen & Webb\n(2022) for objects of type fixest — vcov_CR3J.fixest","text":"Compute CRV3 covariance matrices via cluster jackknife described MacKinnon, Nielsen & Webb (2022) objects type fixest","code":""},{"path":"https://s3alfisc.github.io/summclust/reference/vcov_CR3J.fixest.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Compute CRV3 covariance matrices via a cluster\njackknife as described in MacKinnon, Nielsen & Webb\n(2022) for objects of type fixest — vcov_CR3J.fixest","text":"","code":"# S3 method for fixest vcov_CR3J(   obj,   cluster,   type = \"CRV3\",   return_all = FALSE,   absorb_cluster_fixef = TRUE,   ... )"},{"path":"https://s3alfisc.github.io/summclust/reference/vcov_CR3J.fixest.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Compute CRV3 covariance matrices via a cluster\njackknife as described in MacKinnon, Nielsen & Webb\n(2022) for objects of type fixest — vcov_CR3J.fixest","text":"obj object type fixest cluster clustering vector type \"CRV3\" \"CRV3J\" following MacKinnon, Nielsen & Webb. CRV3 default return_all Logical scalar, FALSE default. vcov returned (FALSE) additional results (TRUE) absorb_cluster_fixef TRUE default. cluster fixed effects projected ? increases numerical stability. ... function arguments passed 'vcov'","code":""},{"path":"https://s3alfisc.github.io/summclust/reference/vcov_CR3J.fixest.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"Compute CRV3 covariance matrices via a cluster\njackknife as described in MacKinnon, Nielsen & Webb\n(2022) for objects of type fixest — vcov_CR3J.fixest","text":"object class vcov_CR3J","code":""},{"path":"https://s3alfisc.github.io/summclust/reference/vcov_CR3J.fixest.html","id":"references","dir":"Reference","previous_headings":"","what":"References","title":"Compute CRV3 covariance matrices via a cluster\njackknife as described in MacKinnon, Nielsen & Webb\n(2022) for objects of type fixest — vcov_CR3J.fixest","text":"MacKinnon, James G., Morten Ørregaard Nielsen, Matthew D. Webb. \"Leverage, influence, jackknife clustered regression models: Reliable inference using summclust.\" arXiv preprint arXiv:2205.03288 (2022).","code":""},{"path":"https://s3alfisc.github.io/summclust/reference/vcov_CR3J.fixest.html","id":"ref-examples","dir":"Reference","previous_headings":"","what":"Examples","title":"Compute CRV3 covariance matrices via a cluster\njackknife as described in MacKinnon, Nielsen & Webb\n(2022) for objects of type fixest — vcov_CR3J.fixest","text":"","code":"# \\donttest{  if(requireNamespace(\"summclust\") && requireNamespace(\"haven\") && requireNamespace(\"fixest\")){  library(summclust) library(haven) library(fixest)  nlswork <- read_dta(\"http://www.stata-press.com/data/r9/nlswork.dta\") # drop NAs at the moment nlswork <- nlswork[, c(\"ln_wage\", \"grade\", \"age\", \"birth_yr\", \"union\", \"race\", \"msp\", \"ind_code\")] nlswork <- na.omit(nlswork)  feols_fit <- feols(   ln_wage ~ union +  race + msp + as.factor(birth_yr) + as.factor(age) + as.factor(grade),   data = nlswork)  # CRV3 standard errors vcov <- vcov_CR3J(    obj = feols_fit,    cluster = ~ind_code,    type = \"CRV3\" )  # CRV3 standard errors vcovJN <- vcov_CR3J(    obj = feols_fit,    cluster = ~ind_code,    type = \"CRV3J\", ) } #> Error in feols(fml = ln_wage ~ 1, data = nlswork): Argument 'data' could not be evaluated. Problem: object 'nlswork' not #> found. # }"},{"path":"https://s3alfisc.github.io/summclust/reference/vcov_CR3J.html","id":null,"dir":"Reference","previous_headings":"","what":"Compute CRV3 covariance matrices via a cluster\njackknife as described in MacKinnon, Nielsen & Webb\n(2022) — vcov_CR3J","title":"Compute CRV3 covariance matrices via a cluster\njackknife as described in MacKinnon, Nielsen & Webb\n(2022) — vcov_CR3J","text":"Compute CRV3 covariance matrices via cluster jackknife described MacKinnon, Nielsen & Webb (2022)","code":""},{"path":"https://s3alfisc.github.io/summclust/reference/vcov_CR3J.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Compute CRV3 covariance matrices via a cluster\njackknife as described in MacKinnon, Nielsen & Webb\n(2022) — vcov_CR3J","text":"","code":"vcov_CR3J(obj, ...)"},{"path":"https://s3alfisc.github.io/summclust/reference/vcov_CR3J.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Compute CRV3 covariance matrices via a cluster\njackknife as described in MacKinnon, Nielsen & Webb\n(2022) — vcov_CR3J","text":"obj object class lm fixest computed? ... misc function argument","code":""},{"path":"https://s3alfisc.github.io/summclust/reference/vcov_CR3J.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"Compute CRV3 covariance matrices via a cluster\njackknife as described in MacKinnon, Nielsen & Webb\n(2022) — vcov_CR3J","text":"object type 'vcov_CR3J'","code":""},{"path":"https://s3alfisc.github.io/summclust/reference/vcov_CR3J.html","id":"references","dir":"Reference","previous_headings":"","what":"References","title":"Compute CRV3 covariance matrices via a cluster\njackknife as described in MacKinnon, Nielsen & Webb\n(2022) — vcov_CR3J","text":"MacKinnon, James G., Morten Ørregaard Nielsen, Matthew D. Webb. \"Leverage, influence, jackknife clustered regression models: Reliable inference using summclust.\" arXiv preprint arXiv:2205.03288 (2022).","code":""},{"path":[]},{"path":"https://s3alfisc.github.io/summclust/reference/vcov_CR3J.html","id":"ref-examples","dir":"Reference","previous_headings":"","what":"Examples","title":"Compute CRV3 covariance matrices via a cluster\njackknife as described in MacKinnon, Nielsen & Webb\n(2022) — vcov_CR3J","text":"","code":"# \\donttest{ if(requireNamespace(\"summclust\") && requireNamespace(\"haven\")){  library(summclust) library(haven)  nlswork <- read_dta(\"http://www.stata-press.com/data/r9/nlswork.dta\") # drop NAs at the moment nlswork <- nlswork[, c(\"ln_wage\", \"grade\", \"age\", \"birth_yr\", \"union\", \"race\", \"msp\", \"ind_code\")] nlswork <- na.omit(nlswork)  lm_fit <- lm(   ln_wage ~ union +  race + msp + as.factor(birth_yr) + as.factor(age) + as.factor(grade),   data = nlswork)  # CRV3 standard errors vcov <- vcov_CR3J(    obj = lm_fit,    cluster = ~ind_code,    type = \"CRV3\" )  # CRV3 standard errors vcovJN <- vcov_CR3J(    obj = lm_fit,    cluster = ~ind_code,    type = \"CRV3J\", ) } #> Error in eval(mf, parent.frame()): object 'nlswork' not found # }"},{"path":"https://s3alfisc.github.io/summclust/reference/vcov_CR3J.lm.html","id":null,"dir":"Reference","previous_headings":"","what":"Compute CRV3 covariance matrices via a cluster\njackknife as described in MacKinnon, Nielsen & Webb\n(2022) for objects of type lm — vcov_CR3J.lm","title":"Compute CRV3 covariance matrices via a cluster\njackknife as described in MacKinnon, Nielsen & Webb\n(2022) for objects of type lm — vcov_CR3J.lm","text":"Compute CRV3 covariance matrices via cluster jackknife described MacKinnon, Nielsen & Webb (2022) objects type lm","code":""},{"path":"https://s3alfisc.github.io/summclust/reference/vcov_CR3J.lm.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Compute CRV3 covariance matrices via a cluster\njackknife as described in MacKinnon, Nielsen & Webb\n(2022) for objects of type lm — vcov_CR3J.lm","text":"","code":"# S3 method for lm vcov_CR3J(obj, cluster, type = \"CRV3\", return_all = FALSE, ...)"},{"path":"https://s3alfisc.github.io/summclust/reference/vcov_CR3J.lm.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Compute CRV3 covariance matrices via a cluster\njackknife as described in MacKinnon, Nielsen & Webb\n(2022) for objects of type lm — vcov_CR3J.lm","text":"obj object type lm cluster clustering vector type \"CRV3\" \"CRV3J\" following MacKinnon, Nielsen & Webb. CRV3 default return_all Logical scalar, FALSE default. vcov returned (FALSE) additional results (TRUE) ... function arguments passed 'vcov'","code":""},{"path":"https://s3alfisc.github.io/summclust/reference/vcov_CR3J.lm.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"Compute CRV3 covariance matrices via a cluster\njackknife as described in MacKinnon, Nielsen & Webb\n(2022) for objects of type lm — vcov_CR3J.lm","text":"object class vcov_CR3J","code":""},{"path":"https://s3alfisc.github.io/summclust/reference/vcov_CR3J.lm.html","id":"references","dir":"Reference","previous_headings":"","what":"References","title":"Compute CRV3 covariance matrices via a cluster\njackknife as described in MacKinnon, Nielsen & Webb\n(2022) for objects of type lm — vcov_CR3J.lm","text":"MacKinnon, James G., Morten Ørregaard Nielsen, Matthew D. Webb. \"Leverage, influence, jackknife clustered regression models: Reliable inference using summclust.\" arXiv preprint arXiv:2205.03288 (2022).","code":""},{"path":"https://s3alfisc.github.io/summclust/reference/vcov_CR3J.lm.html","id":"ref-examples","dir":"Reference","previous_headings":"","what":"Examples","title":"Compute CRV3 covariance matrices via a cluster\njackknife as described in MacKinnon, Nielsen & Webb\n(2022) for objects of type lm — vcov_CR3J.lm","text":"","code":"# \\donttest{ if(requireNamespace(\"summclust\") && requireNamespace(\"haven\")){  library(summclust) library(haven)  nlswork <- read_dta(\"http://www.stata-press.com/data/r9/nlswork.dta\") # drop NAs at the moment nlswork <- nlswork[, c(\"ln_wage\", \"grade\", \"age\", \"birth_yr\", \"union\", \"race\", \"msp\", \"ind_code\")] nlswork <- na.omit(nlswork)  lm_fit <- lm(   ln_wage ~ union +  race + msp + as.factor(birth_yr) + as.factor(age) + as.factor(grade),   data = nlswork)  # CRV3 standard errors vcov <- vcov_CR3J(    obj = lm_fit,    cluster = ~ind_code,    type = \"CRV3\" )  # CRV3 standard errors vcovJN <- vcov_CR3J(    obj = lm_fit,    cluster = ~ind_code,    type = \"CRV3J\", ) } #> Error in eval(mf, parent.frame()): object 'nlswork' not found # }"},{"path":"https://s3alfisc.github.io/summclust/news/index.html","id":"summclust-07","dir":"Changelog","previous_headings":"","what":"summclust 0.7","title":"summclust 0.7","text":"fixes bug turned NA values cluster variables contained model call distinct cluster. Instead, summclust now throws error.","code":""},{"path":"https://s3alfisc.github.io/summclust/news/index.html","id":"summclust-06","dir":"Changelog","previous_headings":"","what":"summclust 0.6","title":"summclust 0.6","text":"support regression weights / weighted least squares prettier errors warnings via cli (0.5.2)","code":""},{"path":"https://s3alfisc.github.io/summclust/news/index.html","id":"summclust-05","dir":"Changelog","previous_headings":"","what":"summclust 0.5","title":"summclust 0.5","text":"CRAN release: 2022-10-04 Initial version released CRAN.","code":""}]
